{"modules":[{"id":"389eba7e-17c5-4b5c-b85e-e9c8faa3756b","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"ec6b2aea-bfa1-48a3-8cae-b7caf14a6aa6"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":159.73329911098108,"y":14}}},{"id":"ec6b2aea-bfa1-48a3-8cae-b7caf14a6aa6","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"fa298e68-5951-4f1c-8d04-317afc320755"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"},{"name":"AnalyticsBehaviorOption","value":"Enable"},{"name":"AnalyticsLanguageLocaleCode","value":"en-US","namespace":null},{"name":"AnalyticsCustomVocabulary","value":"None"},{"name":"AnalyticsRedactionOption","value":"Disable"},{"name":"AnalyticsRedactionPolicy","value":"None","namespace":null}],"metadata":{"position":{"x":394.7332991109811,"y":14}}},{"id":"fa298e68-5951-4f1c-8d04-317afc320755","type":"SetVoice","branches":[{"condition":"Success","transition":"0145951a-542c-44a9-a1b0-183923666abe"}],"parameters":[{"name":"GlobalVoice","value":"Joanna"},{"name":"GlobalEngine","value":"Neural"},{"name":"SpeakingStyle","value":"Conversational"}],"metadata":{"position":{"x":86,"y":211}}},{"id":"98f8da1e-89b5-4cf1-90ca-e7748e38fb8b","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"thanks","transition":"63bbf1ec-a61d-4bf6-8a7f-0a8b3f153018"},{"condition":"NoMatch","transition":"63bbf1ec-a61d-4bf6-8a7f-0a8b3f153018"},{"condition":"Error","transition":"cb5ed8b3-948b-4967-9fb1-e9b1da0a4721"}],"parameters":[{"name":"AudioPrompt","value":"$3","namespace":"User Defined","resourceName":null},{"name":"BotName","value":"hotelbottest"},{"name":"BotAlias","value":"hotelbottest"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1557,"y":734},"conditionMetadata":[{"id":"fa30f7c2-eb03-407e-a3ff-5cee5cd9dc0e","value":"thanks"}],"useDynamic":true,"dynamicMetadata":{}},"target":"Lex"},{"id":"3dd3573d-e50e-450b-9c13-e55e53e4f62e","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"98f8da1e-89b5-4cf1-90ca-e7748e38fb8b"},{"condition":"Error","transition":"cb5ed8b3-948b-4967-9fb1-e9b1da0a4721"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:874895062003:function:requestItems","namespace":null},{"name":"TimeLimit","value":"5"}],"metadata":{"position":{"x":1202,"y":1269},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"676555a7-e887-42be-ae69-0adfabbf635e","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"e6c3e8f6-fee8-420e-8f7e-e367a79de215"},{"condition":"Error","transition":"e6c3e8f6-fee8-420e-8f7e-e367a79de215"}],"parameters":[],"metadata":{"position":{"x":2168,"y":886},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"63bbf1ec-a61d-4bf6-8a7f-0a8b3f153018","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"byebye","transition":"176777cd-61fa-4509-88a8-a9740b0b018a"},{"condition":"NoMatch","transition":"176777cd-61fa-4509-88a8-a9740b0b018a"},{"condition":"Error","transition":"176777cd-61fa-4509-88a8-a9740b0b018a"}],"parameters":[{"name":"AudioPrompt","value":"$4","namespace":"User Defined","resourceName":null},{"name":"BotName","value":"hotelbottest"},{"name":"BotAlias","value":"hotelbottest"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1893,"y":857},"conditionMetadata":[{"id":"b3bc5eb5-2028-43a4-9e77-73526e2caa99","value":"byebye"}],"useDynamic":true,"dynamicMetadata":{}},"target":"Lex"},{"id":"176777cd-61fa-4509-88a8-a9740b0b018a","type":"SetQueue","branches":[{"condition":"Success","transition":"676555a7-e887-42be-ae69-0adfabbf635e"},{"condition":"Error","transition":"e6c3e8f6-fee8-420e-8f7e-e367a79de215"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:874895062003:instance/a6859055-402d-4d00-970b-5b2614ec91f3/queue/cc768b1b-7e24-4b02-b5aa-37ded79d048c","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":1995,"y":601},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:874895062003:instance/a6859055-402d-4d00-970b-5b2614ec91f3/queue/cc768b1b-7e24-4b02-b5aa-37ded79d048c","text":"BasicQueue"}}},{"id":"07d783e6-0cef-4697-bde2-d342e9d29f0e","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"requestItemQuantityTest","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"confirmYes","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"confirmNoOnly","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"confirmNoNeedType","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"confirmNoNeedQuantity","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"transferTo","transition":"4ef70ee9-2a63-4cbe-81c1-b13385ca5b1a"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"confirmNoNeedQuantityClarify","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"confirmNoWoQuantity","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"requestItemTypeTest","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"noOtherNeeds","transition":"271782e2-f091-4fa9-93a7-adf35f43a075"},{"condition":"NoMatch","transition":"4ef70ee9-2a63-4cbe-81c1-b13385ca5b1a"},{"condition":"Error","transition":"4ef70ee9-2a63-4cbe-81c1-b13385ca5b1a"}],"parameters":[{"name":"AudioPrompt","value":"$1","namespace":"User Defined","resourceName":null},{"name":"BotName","value":"hotelbottest"},{"name":"BotAlias","value":"hotelbottest"},{"name":"BotRegion","value":"us-east-1"},{"name":"Parameter","key":"customerNumber","value":"Customer Number","namespace":"System"},{"name":"Parameter","key":"contactId","value":"ContactId","namespace":"System"},{"name":"Parameter","key":"Media.Sip.Headers.From","value":"$.Media.Sip.Headers.From","namespace":"External"},{"name":"Parameter","key":"x-amz-lex:max-speech-duration-ms:*:*","value":"13000","namespace":null},{"name":"Parameter","key":"x-amz-lex:barge-in-enabled:*:*","value":"true","namespace":null},{"name":"Parameter","key":"x-amz-lex:start-silence-threshold-ms:*:*","value":"5000","namespace":null},{"name":"Parameter","key":"lastConfirmedReservation","value":"lastConfirmedReservation","namespace":"Lex.SessionAttributes"},{"name":"Parameter","key":"confirmedItems","value":"confirmedItems","namespace":"Lex.SessionAttributes"},{"name":"Parameter","key":"inputsentenceHis","value":"inputsentenceHis","namespace":"Lex.SessionAttributes"}],"metadata":{"position":{"x":862,"y":660},"conditionMetadata":[{"id":"553a4092-8851-48d3-afbe-1093c235b9b3","value":"requestItemQuantityTest"},{"id":"8ad88124-2bd0-4e25-aaad-c70c6fc45a77","value":"confirmYes"},{"id":"fb881461-9958-4558-8047-732126b8f2eb","value":"confirmNoOnly"},{"id":"34dbedb3-2c85-498d-a13f-20f90d200a45","value":"confirmNoNeedType"},{"id":"494b6a09-f5d3-45c3-96a5-5bc3ffa962f6","value":"confirmNoNeedQuantity"},{"id":"301279ba-c72a-48e0-9ee3-cd535e8696ae","value":"transferTo"},{"id":"f991ecb3-7201-4b2e-91f2-b381a4db0926","value":"confirmNoNeedQuantityClarify"},{"id":"85a8ebf7-d4e8-49eb-bec6-9e660884be3b","value":"confirmNoWoQuantity"},{"id":"b8b1fac1-f94e-432c-8bc8-4a1de54b306e","value":"requestItemTypeTest"},{"id":"5efa739b-ac3a-46f4-9c0a-90ebfeef34e7","value":"noOtherNeeds"}],"useDynamic":true,"dynamicMetadata":{"customerNumber":true,"contactId":true,"Media.Sip.Headers.From":true,"x-amz-lex:max-speech-duration-ms:*:*":false,"x-amz-lex:barge-in-enabled:*:*":false,"x-amz-lex:start-silence-threshold-ms:*:*":false,"lastConfirmedReservation":true,"confirmedItems":true,"inputsentenceHis":true}},"target":"Lex"},{"id":"ada0547d-92c5-482d-ab17-df6295952a9a","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":617,"y":1068}}},{"id":"0145951a-542c-44a9-a1b0-183923666abe","type":"PlayPrompt","branches":[{"condition":"Success","transition":"f2045585-9478-4ca9-a373-19a3fecb0a5e"}],"parameters":[{"name":"Text","value":"Thank you for calling guest services. How may I help you today?","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":90,"y":444},"useDynamic":false}},{"id":"271782e2-f091-4fa9-93a7-adf35f43a075","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Contains","conditionValue":"itemNeedQuantity","transition":"f2045585-9478-4ca9-a373-19a3fecb0a5e"},{"condition":"NoMatch","transition":"f2045585-9478-4ca9-a373-19a3fecb0a5e"}],"parameters":[{"name":"Attribute","value":"lastConfirmedReservation"},{"name":"Namespace","value":"Lex.SessionAttributes"}],"metadata":{"position":{"x":1165,"y":464},"conditionMetadata":[{"id":"8c96fb5f-66ed-486c-a842-6edafd02a2ce","operator":{"name":"包含","value":"Contains","shortDisplay":"contains"},"value":"itemNeedQuantity"}]}},{"id":"e6c3e8f6-fee8-420e-8f7e-e367a79de215","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Contains","conditionValue":"itemNeedQuantity","transition":"f2045585-9478-4ca9-a373-19a3fecb0a5e"},{"condition":"NoMatch","transition":"f2045585-9478-4ca9-a373-19a3fecb0a5e"}],"parameters":[{"name":"Attribute","value":"lastConfirmedReservation"},{"name":"Namespace","value":"Lex.SessionAttributes"}],"metadata":{"position":{"x":2415,"y":347},"conditionMetadata":[{"id":"d5d3b1b2-c50e-4e71-862f-15584224617e","operator":{"name":"包含","value":"Contains","shortDisplay":"contains"},"value":"itemNeedQuantity"}]}},{"id":"f2045585-9478-4ca9-a373-19a3fecb0a5e","type":"SetAttributes","branches":[{"condition":"Success","transition":"07d783e6-0cef-4697-bde2-d342e9d29f0e"},{"condition":"Error","transition":"ada0547d-92c5-482d-ab17-df6295952a9a"}],"parameters":[{"name":"Attribute","value":"Customer Number","key":"contactNumber","namespace":"System"},{"name":"Attribute","value":"ContactId","key":"contact_id","namespace":"System"},{"name":"Attribute","value":"$.Media.Sip.Headers.From","key":"Media.Sip.Headers.FromNew","namespace":null},{"name":"Attribute","value":"lastConfirmedReservation","key":"lastConfirmedReservation","namespace":"Lex.SessionAttributes"},{"name":"Attribute","value":"confirmedItems","key":"confirmedItems","namespace":"Lex.SessionAttributes"},{"name":"Attribute","value":"inputsentenceHis","key":"inputsentenceHis","namespace":"Lex.SessionAttributes"}],"metadata":{"position":{"x":522,"y":742}}},{"id":"cb5ed8b3-948b-4967-9fb1-e9b1da0a4721","type":"PlayPrompt","branches":[{"condition":"Success","transition":"f2045585-9478-4ca9-a373-19a3fecb0a5e"}],"parameters":[{"name":"AudioPrompt","value":"$2","namespace":"User Defined","resourceName":null}],"metadata":{"position":{"x":1546,"y":1576},"useDynamic":true}},{"id":"4ef70ee9-2a63-4cbe-81c1-b13385ca5b1a","type":"Transfer","branches":[{"condition":"Success","transition":"98f8da1e-89b5-4cf1-90ca-e7748e38fb8b"},{"condition":"CallFailure","transition":"3062f94b-dd5a-4101-a70f-08cb363e20b9"},{"condition":"Timeout","transition":"3062f94b-dd5a-4101-a70f-08cb363e20b9"},{"condition":"Error","transition":"3062f94b-dd5a-4101-a70f-08cb363e20b9"}],"parameters":[{"name":"TimeLimit","value":"10"},{"name":"SourceName","value":"HotelBot"},{"name":"SourceNumber","value":"+18338667947"},{"name":"BlindTransfer","value":false},{"name":"PhoneNumber","value":"+8615653208515"}],"metadata":{"position":{"x":881,"y":1344},"CountryCode":"cn"},"target":"PhoneNumber"},{"id":"3062f94b-dd5a-4101-a70f-08cb363e20b9","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"cb5ed8b3-948b-4967-9fb1-e9b1da0a4721"},{"condition":"Error","transition":"cb5ed8b3-948b-4967-9fb1-e9b1da0a4721"}],"parameters":[{"name":"FunctionArn","value":"arn:aws:lambda:us-east-1:874895062003:function:notfiyBusinessSystem","namespace":null},{"name":"TimeLimit","value":"5"}],"metadata":{"position":{"x":1228,"y":1489},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"389eba7e-17c5-4b5c-b85e-e9c8faa3756b","metadata":{"entryPointPosition":{"x":14.999999855609985,"y":15.5},"snapToGrid":false,"name":"HotelServiceTest","description":null,"type":"contactFlow","status":"published","hash":"b9898f6c6d28b42d18cfdf6c51b997653519991de08c4b71bb25686a944a6a57"}}